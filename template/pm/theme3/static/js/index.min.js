function openLive800Chat(e){var t="https://www.onlineservice-hk.com/k800/chatClient/chatbox.jsp?companyID=209&s=1";e?location.href=t:window.open(t,"Live800Chatindow","height=520,width=740,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no")}function openQQChatByCommonv3(e,t){common.isBlank(t)&&(t="800018282");var i="http://crm2.qq.com/page/portalpage/wpa.php?uin="+t+"&cref=&ref=&f=1&ty=1&ap=&as="+e;window.open(i,"QQChatindow","height=544, width=644,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no")}function openQQChatByCommonjs(){var e="http://wpa.b.qq.com/cgi/wpa.php?ln=2&uin=800018282";window.open(e)}function live800Prompt(e){window.onbeforeunload=null;var t="http://wpa.b.qq.com/cgi/wpa.php?ln=2&uin=800018886",i="http://onlinecustomer-service.gwghk.com/live800/chatClient/chatbox.jsp?companyID=283&enterurl=http%3A%2F%2Fwww%2Egwfx%2Ecom%2F&tm=1355377642406";if(2==e)try{UUID.prototype.createUUID();window.open(t,"Live800Chatindow","height=520,width=740,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no")}catch(n){window.open(t,"Live800Chatindow","height=520,width=740,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no")}else try{UUID.prototype.createUUID();window.open(i,"Live800Chatindow","height=520,width=740,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no")}catch(n){window.open(i)}}function qqPrompt(e){var t="http://wpa.b.qq.com/cgi/wpa.php?ln=2&uin=800018886";window.onbeforeunload=null;try{var i=UUID.prototype.createUUID();getGacookiesTrack(i,"2","1"),window.open(t,"Live800Chatindow","height=520,width=740,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no")}catch(n){window.open(t,"Live800Chatindow","height=520,width=740,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no")}}function video_rtmp(){return{video:swfobject.obsConfig}}function video_autoSwitchChannel(){return!1}function video_autoSwitchTime(){return 15}function video_msg(){return{autoSwitch:"视频线路出现问题，系统将自动切换下一条视频线路。",fail:"视频线路出现问题，请检查网络。",loading:"加载中"}}var common={daysCN:{0:"星期天",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},clientGroupStr:{vip:"VIP会员",active:"激活会员",notActive:"真实会员",simulate:"模拟会员",register:"注册会员",visitor:"游客"},remove:function(e,t){return isNaN(t)||t>e.length?!1:void e.splice(t,1)},joinSplit:function(e){return",".concat(e).concat(",")},isBlank:function(e){return void 0==e||null==e||"undefined"==e||"null"==e||""==$.trim(e)},isValid:function(e){return!this.isBlank(e)},trim:function(e){return this.isBlank(e)?"":e.toString().replace(/(^\s*)|(\s*$)/g,"")},escapeHtml:function(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML.replace(/"/g,'\\"')},encodeHtml:function(e){return this.isBlank(e)?"":e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},formatterDate:function(e,t){t||(t="-"),e instanceof Date||(e=new Date(e));var i=e.getFullYear()+t+(e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1))+t+(e.getDate()<10?"0"+e.getDate():e.getDate());return i},getHHMMSS:function(e){e instanceof Date||(e=new Date(e));var t=(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds());return t},getMMSS:function(e){return e instanceof Date||(e=new Date(e)),(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},getHHMM:function(e){e instanceof Date||(e=new Date(e));var t=(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes());return t},formatterDateTime:function(e,t){if(t||(t="-"),e instanceof Date||(e=new Date(e)),"Invalid Date"==e)return"";var i=e.getFullYear()+t+(e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1))+t+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds());return i},longMsTimeToDateTime:function(e,t){var i=new Date(e);return this.formatterDateTime(i,t)},getDaysInMonth:function(e){var t=new Date(e.getFullYear(),e.getMonth()+1,1),i=Math.floor((t.getTime()-e.getTime())/864e5)+e.getDate()-1;return i},showBox:function(e,t){$(e).slideDown(),$(t||".layer-shadow").show()},hideBox:function(e,t){$(e).slideUp(),$(t||".layer-shadow").hide()},containSplitStr:function(e,t){return common.isBlank(e)||common.isBlank(t)?!1:-1!=(","+e+",").indexOf(","+t+",")},getJson:function(e,t,i,n,a){var o=null;return $.ajax({url:e,type:"POST",timeout:1e5,cache:!1,async:void 0!=n?n:i?!0:!1,dataType:"json",data:t,success:"function"==typeof i?i:function(e){o=e},error:function(t,i){"function"==typeof a?a(i):common.isValid(t.responseText)&&"OK"!=t.statusText?console.error(t.responseText):console.error("请求超时,请重试:url[%s]",e)}}),o},arraySort:function(e,t){return function(i,n){return t?i[e]<n[e]:i[e]>n[e]}},randomNumber:function(e){for(var t="",i=0;e>i;i++)t+=Math.floor(10*Math.random());return t},isMobilePhone:function(e){return/(^[0-9]{11})$|(^86(-){0,3}[0-9]{11})$/.test(e)},dateTimeWeekCheck:function(e,t,i){if(this.isBlank(e))return!!t;$.isPlainObject(e)||(e=JSON.parse(e));var n=i?new Date(i):new Date,a=!1,o=this.formatterDate(n);if(a=this.isBlank(e.beginDate)||o>=e.beginDate,a&&(a=this.isBlank(e.endDate)||o<=e.endDate),!a)return!1;var s=e.weekTime;if(this.isBlank(s))return a;var r=null,l=null,u=!1;for(var c in s)if(r=s[c],(!this.isValid(r.week)||n.getDay()==parseInt(r.week))&&(l=this.getHHMMSS(n),u=this.isBlank(r.beginTime)||l>=r.beginTime,u&&(u=this.isBlank(r.endTime)||l<=r.endTime),u))break;return u},arrayUnique:function(e){if(!e)return e;for(var t,i=[],n={},a=0;null!=(t=e[a]);a++)n[t]||(i.push(t),n[t]=!0);return i},isWebSocket:function(){return window.WebSocket},getSocket:function(e,t,i){return common.isWebSocket()?(console.log("used websocket!"),e.connect(t.webSocket+"/"+i,{transports:["websocket"]})):e.connect(t.socketIO+"/"+i)},randomNumber:function(e){for(var t="",i=0;e>i;i++)t+=Math.floor(10*Math.random());return t},clearMsgHtml:function(e){var e=e.replace(/((^((&nbsp;)+))|\n|\t|\r)/g,"").replace(/<\/?(?!(img|IMG)\s+src="[^>"]+\/face\/[^>"]+"\s*>)[^>]*>/g,"");return e&&(e=$.trim(e)),e},formatToJson:function(e){return this.isBlank(e)?null:JSON.parse(e)},getSyllabusPlan:function(e,t,i,n){if(!e||!e.courses)return null;var a=function(e,t){if(e&&3!=t){var a,o=common.isMobile();"object"!=typeof e&&(e=JSON.parse(e));for(var s in e)if(a=e[s],o){if(1==t&&(!i&&3==a.code||i&&4==a.code))return a.url}else if(n){if(1==t&&3==a.code){var r=a.url||"";return r=r.replace(/^http:/,"rtmps:").replace(/\/index\.m3u8$/,"")}}else if(a.code==t)return a.url}return null},o=function(t,i,n){var o=null,s=t.course;return s&&s.length>i?(o=s[i],0==o.status||common.isBlank(o.lecturerId)?null:(o.studioLink=a(e.studioLink,o.courseType),o.startTime=t.startTime,o.endTime=t.endTime,o.day=l[i].day,o.isNext=n,o)):null},s=null;s=this.isValid(e.courses)&&"object"!=typeof e.courses?JSON.parse(e.courses):e.courses;for(var r,l=s.days,u=s.timeBuckets,c=(new Date(t).getDay()+6)%7,d=common.getHHMM(t),p=null,h=null,f=0;f<l.length;f++)if(0!=l[f].status)if(r=(l[f].day+6)%7,r>c){for(var m in u)if(p=u[m],h=o(p,f,!0))return h}else if(r==c)for(var m in u)if(p=u[m],p.startTime<=d&&(p.endTime>=d||"00:00"==p.endTime)?h=o(p,f,!1):p.startTime>d&&(h=o(p,f,!0)),h)return h;if(!e.publishEnd)return null;for(var f=0;f<l.length;f++)if(0!=l[f].status&&(r=(l[f].day+6)%7,!(e.publishEnd<864e5*(r+7-c)+t)))for(var m=0;m<u.length;m++)if(h=o(u[m],f,!0))return h;return null},formatSyllabus:function(e,t,i,n){var a={dayCN:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"],indexCN:["第一节","第二节","第三节","第四节","第五节","第六节","第七节","第八节"],courseCls:["prev","ing","next"],tableCls:"syllabus",courseType:{0:"文字在线",1:"视频在线",2:"ONE TV"}},o=new Date(t).getDay(),s=this.getHHMM(t),r=$.extend({},a,n),l=function(e,t,i,n){var a=0,l=(e+6)%7,u=(o+6)%7;return a=l>u?2:u>l?0:n?1:s>=i?0:t>s?2:1,r.courseCls[a]},u=[];try{if(e){var c=$.isPlainObject(e)?e:JSON.parse(e),d=c.days?c.days.length:0;if(d>0)if(1===i){var p={0:"文字",1:"视频",2:"oneTV"};u.push('<div class="sy_panel">');var h=t-864e5*((o+6)%7),f=null,m=null,v=null;u.push('<div class="sy_nav">');for(var g=' style="width:'+100/d+'%;"',y=0;d>y;y++)f=new Date(h+(c.days[y].day+6)%7*864e5),m=f.getFullYear()+"-"+(f.getMonth()<9?"0":"")+(f.getMonth()+1)+"-"+(f.getDate()<10?"0":"")+f.getDate(),v=c.days[y].day==o?' class="active"':"",u.push('<a href="javascript:void(0)" d="'+c.days[y].day+'"'+v+g+">"+r.dayCN[c.days[y].day]+"<br/><span>"+m+'</span><em class="dir">^</em></a>');u.push("</div>"),u.push('<div class="sy_cont"><div>'),u.push('<table cellpadding="0" cellspacing="0" border="0" class="'+r.tableCls+'">');for(var w=null,b=null,y=0;d>y;y++){if(u.push('<tbody d="'+c.days[y].day+'">'),0==c.days[y].status)b=l(c.days[y].day,null,null,!0),u.push('<tr class="'+b+'" width="100%"><td>休市</td></tr>');else for(var S=0,T=c.timeBuckets.length;T>S;S++)w=c.timeBuckets[S],b=l(c.days[y].day,w.startTime,w.endTime,!1),0==w.course[y].status?(u.push('<tr class="'+b+'">'),u.push('<td width="25%">'+w.startTime+"-"+w.endTime+"</td>"),u.push('<td colspan="2" width="75%">休市</td>'),u.push("</tr>")):w.course[y].lecturer&&(u.push('<tr class="'+b+'">'),u.push('<td width="25%">'+w.startTime+"-"+w.endTime+"【"+p[w.course[y].courseType]+"】</td>"),u.push('<td width="25%">'+w.course[y].lecturer+"</td>"),u.push('<td width="50%">'+w.course[y].title+"</td>"),u.push("</tr>"));u.push("</tbody>")}u.push("</table>"),u.push("</div></div>"),u.push("</div>")}else if(2===i){u.push('<table cellpadding="0" cellspacing="1" border="0" class="'+r.tableCls+'">'),u.push("<tr>"),u.push("<th>星期\\节次</th>");for(var T=c.timeBuckets?c.timeBuckets.length:0,w=null,b=null,S=0;T>S;S++)w=c.timeBuckets[S],u.push("<th>"+r.indexCN[S]+"<br><span>("+w.startTime+"-"+w.endTime+")</span></th>");u.push("</tr>");for(var M=null,y=0,k=c.days?c.days.length:0;k>y;y++){if(M=c.days[y],u.push("<tr>"),u.push("<th>"+r.dayCN[M.day]+"</th>"),0==M.status)b=l(M.day,null,null,!0),u.push('<td class="'+b+'" colspan="'+T+'">休市</td>');else for(var S=0;T>S;S++)w=c.timeBuckets[S],b=l(M.day,w.startTime,w.endTime,!1),u.push('<td class="'+b+'">'+(0==w.course[y].status?"休市":w.course[y].lecturer)+"</td>");u.push("</tr>")}u.push("</table>")}else if(3===i){var h=s-864e5*((o+6)%7),f=null,v=null,M=null,g=' style="width:'+100/d+'%;"';u.push("<tr>");for(var y=0;d>y;y++)M=c.days[y],f=new Date(h+(c.days[y].day+6)%7*864e5),v=c.days[y].day==o?' class="active"':"",u.push('<th d="'+c.days[y].day+'"'+v+g+">"+r.dayCN[c.days[y].day]+"<i></i></th>");u.push("</tr>"),u.push('<tr><td class="space" colspan="'+d+'"></td></tr>');for(var w=null,b=null,y=0;d>y;y++){if(M=c.days[y],u.push('<tr d="'+M.day+'"><td colspan="'+d+'">'),0==M.status)b=l(M.day,null,null,!0),u.push('<p class="'+b+'">休市</p>');else for(var S=0,T=c.timeBuckets?c.timeBuckets.length:0;T>S;S++)w=c.timeBuckets[S],w.course[y].lecturer&&(b=l(M.day,w.startTime,w.endTime,!1),u.push('<p class="'+b+'">'),u.push("<span>"+w.startTime+"-"+w.endTime+"</span>"),0==w.course[y].status?u.push("<span>休市</span>"):(u.push("<span>"+r.courseType[w.course[y].courseType]+"</span>"),u.push("<span>"+w.course[y].lecturer+"</span>"),u.push('<span class="item">'+w.course[y].title+"</span>")),u.push("</p>"));u.push("</td></tr>")}}}}catch(C){return console.error("formatSyllabus->"+C),""}return u.join("")},isMobile:function(){return/(iphone|ipod|ipad|android|mobile|playbook|bb10|meego)/.test(navigator.userAgent.toLowerCase())},isHTTPS:function(){return/^https:\/\//.test(location.href)},copyObject:function(e,t,i){if(!t)return e;for(var n in e)t.hasOwnProperty(n)&&common.isValid(t[n])&&(e[n]=t[n]);if(i)for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},isRightName:function(e){return!/^([0-9]{2,10})$/g.test(e)&&/^([\w\u4e00-\u9fa5]{2,10})$/g.test(e)},randomIndex:function(e){var t=parseInt(Math.round(Math.random()*e));return t==e&&(t=e-1),0>t?0:t},saveToDesktop:function(e,t){try{var i=new ActiveXObject("WScript.Shell"),n=i.CreateShortcut(i.SpecialFolders("Desktop")+"\\"+t+".url");n.TargetPath=e,n.Save()}catch(a){return!1}return!0},getUrlParam:function(e,t){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(i);if(t){if(null!=n)return n[2]}else if(null!=n)return unescape(n[2]);return null},keysrt:function(e,t){return function(i,n){return t?~~(i[e]<n[e]):~~(i[e]>n[e])}},newsMarquee:function(e,t,i,n,a,o,s){e&&(clearInterval(e),e=null);var r="object"==typeof i?i:$(i),l="object"==typeof n?n[0]:$(n)[0],u="object"==typeof a?a:$(a),c="object"==typeof o?o:$(o);if(s&&u.children().size()>0?r.show():r.hide(),c.html(""),$(l).unbind("mouseover mouseout"),s){u.css("width","auto"),c.css("width","auto");var d=r.width()-27;u.width()<d&&(u.css("width",d),c.css("width",d)),c.html(u.html());var p=function(){u.width()-l.scrollLeft<=0?l.scrollLeft-=u.width():l.scrollLeft++};e=window.setInterval(p,t),$(l).bind("mouseover",function(){window.clearInterval(e),e=null}).bind("mouseout",function(){e&&(window.clearInterval(e),e=null),e=window.setInterval(p,t)})}},placeholderSupport:function(e){e="object"==typeof e?e:$(e);var t="placeholder"in document.createElement("input");t||e.each(function(){var e=$(this).attr("placeholder");if(e){var t=$(this),i=$('<span class="placeholder">'+e+"</span>");t.before(i),i.bind("click",function(){$(this).hide(),$(this).next().focus()}),t.bind("focus",function(){$(this).prev().hide()}),t.bind("blur",function(){""===$(this).val()&&$(this).prev().show()}),""!=t[0].defaultValue&&t.prev().hide(),$(this).attr("placeholder","")}})},openPopup:function(e){e="object"==typeof e?e:$(e),e.show()},isEmail:function(e){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)},getDateDiff:function(e,t){var i=new Date(e).getTime(),n=new Date(t).getTime(),a=Math.abs(i-n)/864e5;return a},getHourDiff:function(e,t){var i=new Date(e).getTime(),n=new Date(t).getTime(),a=Math.abs(i-n)/36e5;return a=Math.floor(a)},getMinuteDiff:function(e,t){var i=new Date(e).getTime(),n=new Date(t).getTime(),a=Math.abs(i-n)/6e4;return a=Math.floor(a)},addDate:function(e,t){var i=new Date(e);i.setDate(i.getDate()+t);var n=i.getMonth()+1;return i.getFullYear()+"-"+n+"-"+i.getDate()}};window.console||(console=function(){function e(){}function t(){return null==i&&(i=new e),i}var i=null;return e.prototype={log:function(e){},error:function(e){}},t()}()),$.fn.focusEnd=function(){$(this).focus();var e=$("<span/>").appendTo($(this)),t=e.get(0),i=null,n=null;return document.selection?(i=document.body.createTextRange(),i.moveToElementText(t),i.select()):window.getSelection&&(i=document.createRange(),i.selectNode(t),n=window.getSelection(),n.removeAllRanges(),n.addRange(i)),e.remove(),this},String.prototype.formatStr=function(){if(0==arguments.length)return this;for(var e=this,t=0;t<arguments.length;t++)e=e.replace(new RegExp("\\{"+t+"\\}","g"),null==arguments[t]||void 0==arguments[t]?"":arguments[t]);return e};var swfobject=function(){function e(){if(!q){try{var e=E.getElementsByTagName("body")[0].appendChild(v("span"));e.parentNode.removeChild(e)}catch(t){return}q=!0;for(var i=U.length,n=0;i>n;n++)U[n]()}}function t(e){q?e():U[U.length]=e}function i(e){if(typeof V.addEventListener!=$)V.addEventListener("load",e,!1);else if(typeof E.addEventListener!=$)E.addEventListener("load",e,!1);else if(typeof V.attachEvent!=$)g(V,"onload",e);else if("function"==typeof V.onload){var t=V.onload;V.onload=function(){t(),e()}}else V.onload=e}function n(){A?a():o()}function a(){var e=E.getElementsByTagName("body")[0],t=v(x);t.setAttribute("type",B);var i=e.appendChild(t);if(i){var n=0;!function(){if(typeof i.GetVariable!=$){var a=i.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),R.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(10>n)return n++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,o()}()}else o()}function o(){var e=_.length;if(e>0)for(var t=0;e>t;t++){var i=_[t].id,n=_[t].callbackFn,a={success:!1,id:i};if(R.pv[0]>0){var o=m(i);if(o)if(!y(_[t].swfVersion)||R.wk&&R.wk<312)if(_[t].expressInstall&&r()){var c={};c.data=_[t].expressInstall,c.width=o.getAttribute("width")||"0",c.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(c.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(c.align=o.getAttribute("align"));for(var d={},p=o.getElementsByTagName("param"),h=p.length,f=0;h>f;f++)"movie"!=p[f].getAttribute("name").toLowerCase()&&(d[p[f].getAttribute("name")]=p[f].getAttribute("value"));l(c,d,i,n)}else u(o),n&&n(a);else b(i,!0),n&&(a.success=!0,a.ref=s(i),n(a))}else if(b(i,!0),n){var v=s(i);v&&typeof v.SetVariable!=$&&(a.success=!0,a.ref=v),n(a)}}}function s(e){var t=null,i=m(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=$)t=i;else{var n=i.getElementsByTagName(x)[0];n&&(t=n)}return t}function r(){return!z&&y("6.0.65")&&(R.win||R.mac)&&!(R.wk&&R.wk<312)}function l(e,t,i,n){z=!0,k=n||null,C={success:!1,id:i};var a=m(i);if(a){"OBJECT"==a.nodeName?(T=c(a),M=null):(T=a,M=i),e.id=N,(typeof e.width==$||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==$||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),E.title=E.title.slice(0,47)+" - Flash Player Installation";var o=R.ie&&R.win?"ActiveX":"PlugIn",s="MMredirectURL="+V.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+E.title;if(typeof t.flashvars!=$?t.flashvars+="&"+s:t.flashvars=s,R.ie&&R.win&&4!=a.readyState){var r=v("div");i+="SWFObjectNew",r.setAttribute("id",i),a.parentNode.insertBefore(r,a),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}d(e,t,i)}}function u(e){if(R.ie&&R.win&&4!=e.readyState){var t=v("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(c(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(c(e),e)}function c(e){var t=v("div");if(R.win&&R.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(x)[0];if(i){var n=i.childNodes;if(n)for(var a=n.length,o=0;a>o;o++)1==n[o].nodeType&&"PARAM"==n[o].nodeName||8==n[o].nodeType||t.appendChild(n[o].cloneNode(!0))}}return t}function d(e,t,i){var n,a=m(i);if(R.wk&&R.wk<312)return n;if(a)if(typeof e.id==$&&(e.id=i),R.ie&&R.win){var o="";for(var s in e)e[s]!=Object.prototype[s]&&("data"==s.toLowerCase()?t.movie=e[s]:"styleclass"==s.toLowerCase()?o+=' class="'+e[s]+'"':"classid"!=s.toLowerCase()&&(o+=" "+s+'="'+e[s]+'"'));var r="";for(var l in t)t[l]!=Object.prototype[l]&&(r+='<param name="'+l+'" value="'+t[l]+'" />');a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+r+"</object>",H[H.length]=e.id,n=m(e.id)}else{var u=v(x);u.setAttribute("type",B);for(var c in e)e[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?u.setAttribute("class",e[c]):"classid"!=c.toLowerCase()&&u.setAttribute(c,e[c]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&p(u,d,t[d]);a.parentNode.replaceChild(u,a),n=u}return n}function p(e,t,i){var n=v("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function h(e){var t=m(e);t&&"OBJECT"==t.nodeName&&(R.ie&&R.win?(t.style.display="none",function(){4==t.readyState?f(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function f(e){var t=m(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function m(e){var t=null;try{t=E.getElementById(e)}catch(i){}return t}function v(e){return E.createElement(e)}function g(e,t,i){e.attachEvent(t,i),F[F.length]=[e,t,i]}function y(e){var t=R.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?!0:!1}function w(e,t,i,n){if(!R.ie||!R.mac){var a=E.getElementsByTagName("head")[0];if(a){var o=i&&"string"==typeof i?i:"screen";if(n&&(I=null,D=null),!I||D!=o){var s=v("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),I=a.appendChild(s),R.ie&&R.win&&typeof E.styleSheets!=$&&E.styleSheets.length>0&&(I=E.styleSheets[E.styleSheets.length-1]),D=o}R.ie&&R.win?I&&typeof I.addRule==x&&I.addRule(e,t):I&&typeof E.createTextNode!=$&&I.appendChild(E.createTextNode(e+" {"+t+"}"))}}}function b(e,t){if(W){var i=t?"visible":"hidden";q&&m(e)?m(e).style.visibility=i:w("#"+e,"visibility:"+i)}}function S(e){var t=/[\\\"<>\.;]/,i=null!=t.exec(e);return i&&typeof encodeURIComponent!=$?encodeURIComponent(e):e}var T,M,k,C,I,D,$="undefined",x="object",L="Shockwave Flash",j="ShockwaveFlash.ShockwaveFlash",B="application/x-shockwave-flash",N="SWFObjectExprInst",P="onreadystatechange",V=window,E=document,O=navigator,A=!1,U=[n],_=[],H=[],F=[],q=!1,z=!1,W=!0,R=function(){var e=typeof E.getElementById!=$&&typeof E.getElementsByTagName!=$&&typeof E.createElement!=$,t=O.userAgent.toLowerCase(),i=O.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(t),a=i?/mac/.test(i):/mac/.test(t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s=!1,r=[0,0,0],l=null;if(typeof O.plugins!=$&&typeof O.plugins[L]==x)l=O.plugins[L].description,!l||typeof O.mimeTypes!=$&&O.mimeTypes[B]&&!O.mimeTypes[B].enabledPlugin||(A=!0,s=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),r[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),r[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),r[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof V.ActiveXObject!=$)try{var u=new ActiveXObject(j);u&&(l=u.GetVariable("$version"),l&&(s=!0,l=l.split(" ")[1].split(","),r=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(c){}return{w3:e,pv:r,wk:o,ie:s,win:n,mac:a}}();(function(){R.w3&&((typeof E.readyState!=$&&"complete"==E.readyState||typeof E.readyState==$&&(E.getElementsByTagName("body")[0]||E.body))&&e(),q||(typeof E.addEventListener!=$&&E.addEventListener("DOMContentLoaded",e,!1),R.ie&&R.win&&(E.attachEvent(P,function(){"complete"==E.readyState&&(E.detachEvent(P,arguments.callee),e())}),V==top&&!function(){if(!q){try{E.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),R.wk&&!function(){return q?void 0:/loaded|complete/.test(E.readyState)?void e():void setTimeout(arguments.callee,0)}(),i(e)))})(),function(){R.ie&&R.win&&window.attachEvent("onunload",function(){for(var e=F.length,t=0;e>t;t++)F[t][0].detachEvent(F[t][1],F[t][2]);for(var i=H.length,n=0;i>n;n++)h(H[n]);for(var a in R)R[a]=null;R=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})}();return{registerObject:function(e,t,i,n){if(R.w3&&e&&t){var a={};a.id=e,a.swfVersion=t,a.expressInstall=i,a.callbackFn=n,_[_.length]=a,b(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){return R.w3?s(e):void 0},embedSWF:function(e,i,n,a,o,s,u,c,p,h){var f={success:!1,id:i};R.w3&&!(R.wk&&R.wk<312)&&e&&i&&n&&a&&o?(b(i,!1),t(function(){n+="",a+="";var t={};if(p&&typeof p===x)for(var m in p)t[m]=p[m];t.data=e,t.width=n,t.height=a;var v={};if(c&&typeof c===x)for(var g in c)v[g]=c[g];if(u&&typeof u===x)for(var w in u)typeof v.flashvars!=$?v.flashvars+="&"+w+"="+u[w]:v.flashvars=w+"="+u[w];if(y(o)){var S=d(t,v,i);t.id==i&&b(i,!0),f.success=!0,f.ref=S}else{if(s&&r())return t.data=s,void l(t,v,i,h);b(i,!0)}h&&h(f)})):h&&h(f)},switchOffAutoHideShow:function(){W=!1},ua:R,getFlashPlayerVersion:function(){return{major:R.pv[0],minor:R.pv[1],release:R.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(e,t,i){return R.w3?d(e,t,i):void 0},showExpressInstall:function(e,t,i,n){R.w3&&r()&&l(e,t,i,n)},removeSWF:function(e){R.w3&&h(e)},createCSS:function(e,t,i,n){R.w3&&w(e,t,i,n)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=E.location.search||E.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return S(t);for(var i=t.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==e)return S(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(z){var e=m(N);e&&T&&(e.parentNode.replaceChild(T,e),M&&(b(M,!0),R.ie&&R.win&&(T.style.display="block")),k&&k(C)),z=!1}}}}();swfobject.obsConfig=[];var obsPlayer=function(){var e={hk:["rtmp://hk.hhkcdn.com/live","rtmp://hk.vpcdn.com/live","rtmp://h6.phgse.cn/live","rtmp://ct.phgsa.cn:1935/live"],sz:["rtmp://sz.hhkcdn.com/live","rtmp://sz.vpcdn.com/live","rtmp://sz6.phgse.cn/live","rtmp://ct1.phgsa.cn:1935/live"]},t=function(t,i){swfobject.obsConfig=[];var n=/(.*)\/([0-9]+)$/g.exec(t);if(n&&!(n.length<3)){var a=null;for(var o in e)if(a=e[o],a&&-1!=a.join(";").indexOf(n[1])){for(var s in a)a[s]&&swfobject.obsConfig.push({url:a[s]+"/",id:n[2]});break}swfobject.embedSWF("/base/lib/obsplayer/VPlayer.swf?t=1",i,"100%","100%","10.0.0","/base/lib/obsplayer/expressInstall.swf",{},{menu:"false",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always",bgcolor:"",wmode:"opaque"},{id:"VPlayer"})}};return{init:function(e,i,n){n&&$("#"+i).empty();var a="js_obs_"+i;0==$("#"+a).length&&$("#"+i).append('<div id="'+a+'"></div>'),t(e,a)}}}(),StudioChatMini={apiUrl:"",filePath:"",currStudioAuth:!1,options:null,blwsPlayer:null,syllabusData:null,serverTime:0,pushObj:{talkPush:[]},msgType:{text:"text",img:"img",file:"file"},socket:null,socketUrl:"",userInfo:null,video:{type:"mp4",list:[],listMp4Index:[],index:-1},courses:null,init:function(){this.serverTimeUp(),this.setVisitStore(),this.setSocket(),this.setVideoList(),this.setEvent()},serverTimeUp:function(){StudioChatMini.clientVideoTask(),setInterval(function(){StudioChatMini.serverTime+=1e3,StudioChatMini.setPushInfo(),StudioChatMini.clientVideoTask()},1e3)},setVisitStore:function(){if(!store.enabled)return void console.log("Local storage is not supported by your browser.");var e="storeInfos_"+this.userInfo.groupType,t=store.get(e),i={};if(common.isBlank(t)){var n=common.randomNumber(8);i.clientStoreId=(new Date).getTime()+"_"+n,i.userId="visitor_"+n,i.nickname="游客_"+n,i.userType=-1,store.set(e,i)}else i=t;this.userInfo.clientStoreId=i.clientStoreId,this.userInfo.visitorId=i.userId,this.userInfo.loginId=i.loginId,this.userInfo.clientGroup&&"visitor"==this.userInfo.clientGroup?(this.userInfo.nickname=i.nickname,this.userInfo.userId=i.userId):(i.loginId=this.userInfo.userId,store.set(e,i))},clientVideoTask:function(){var e=common.getSyllabusPlan(this.syllabusData,this.serverTime),t=e&&0!=e.status&&common.isValid(e.studioLink)&&1==e.courseType&&!e.isNext;$("#studioVideoDiv embed").size()<1&&t&&$("#vbackbtn_live").show()},playVideo:function(e,t){if(StudioChatMini.video.type=e,"mp4"==e||"video"==e){var i=StudioChatMini.changeVideoIndex(e);this.player.play("vod",i.url,i.title)}else{var n=common.getSyllabusPlan(this.syllabusData,this.serverTime);!n||0!=n.courseType&&common.isBlank(n.studioLink)||n.isNext||0==n.courseType||2==n.courseType?t?alert("目前还没有视频直播，详情请留意直播间的课程安排！"):(StudioChatMini.playVideo("mp4"),n&&!n.isNext&&0==n.courseType&&setTimeout(function(){window.SewisePlayer&&SewisePlayer.doStop()},1500)):($("#vbackbtn_live").hide(),this.player.play("live",n.studioLink,n.title))}},changeVideoIndex:function(e){var t=-1,i=StudioChatMini.video.listMp4Index.length;return"mp4"!=e||0==i?(i=StudioChatMini.video.list.length,0==i?t=-1:1==i?t=0:-1==StudioChatMini.video.index?t=common.randomIndex(i):(t=common.randomIndex(i-1),t>=StudioChatMini.video.index&&t++)):1==i?t=StudioChatMini.video.listMp4Index[0]:(-1==StudioChatMini.video.index?t=common.randomIndex(i):(t=common.randomIndex(i-1),StudioChatMini.video.listMp4Index[t]>=StudioChatMini.video.index&&t++),t=StudioChatMini.video.listMp4Index[t]),StudioChatMini.video.index=t,-1==t?null:StudioChatMini.video.list[t]},player:{videoData:function(e,t,i){var n=e.data("videoData")||{};return 3==arguments.length?(n[t]=i,e.data("videoData",n),n):n[t]},playByIframe:function(e,t,i,n){this.clear(e),e.append('<iframe frameborder=0 width="100%" height="100%" src="'+t+'" allowfullscreen></iframe>')},playByBLWS:function(e,t,i,n){var a=t.split("&");if(a.length>1){var o=a[1].replace(/^vid=/g,"");if(this.clear(e),this.videoData(e,"isLoading"));else if(window.polyvObject){var s=polyvObject(e).videoPlayer({width:"100%",height:"100%",vid:o,flashvars:{autoplay:n,setScreen:"fill"},onPlayOver:function(e){}});this.videoData(e,"player",s)}else{this.videoData(e,"isLoading",!0);var r=this;LazyLoad.js(["/base/lib/polyvplayer.min.js"],function(){var t=polyvObject(e).videoPlayer({width:"100%",height:"100%",vid:o,flashvars:{autoplay:n,setScreen:"fill"},onPlayOver:function(e){}});r.videoData(e,"player",t),r.videoData(e,"isLoading",!1)})}}},playBySewise:function(e,t,i,n){if(this.clear(e),this.videoData(e,"isLoading"));else if(window.Sewise){var a=new Sewise.SewisePlayer({elid:e,autostart:n,url:t,title:i,skin:"vodWhite",localPath:"/base/lib/sewise/"});n&&a.startup(),this.videoData(e,"player",a)}else{this.videoData(e,"isLoading",!0);var o=this;LazyLoad.js(["/base/lib/sewise/sewise.player.min.js"],function(){var a=new Sewise.SewisePlayer({elid:e,autostart:n,url:t,title:i,skin:"vodWhite",localPath:"/base/lib/sewise/"});n&&a.startup(),o.videoData(e,"player",a),o.videoData(e,"isLoading",!1)})}},playByEmbed:function(e,t,i,n){this.clear(e);var a=[];a.push('<embed src="'),a.push(t),a.push('" autostart="'+n+'" wmode="Opaque" quality="high" width="100%" height="100%" align="middle" allowScriptAccess="never" allowFullScreen="true" mode="transparent" type="application/x-shockwave-flash"></embed>'),e.html(a.join(""))},playByVideo:function(e,t,i,n){this.clear(e),e.html('<video src="'+t+'" controls="true" webkit-playsinline autoplay="'+n+'" style="width: 100%; height: 100%; background-color: rgb(0, 0, 0);"></video>');var a=e.find("video");n?a.trigger("play"):a.trigger("pause")},clear:function(e){e.empty()},play:function(e,t,i){var n=null;"live"==e?(n=$("#studioVideoDiv"),this.clear($("#tVideoDiv")),$("#stVideoDiv").show(),$("#tvDivId").hide(),$("#stVideoDiv .vtitle span").text(i),$("#studioTeachId a.on").removeClass("on")):(n=$("#tVideoDiv"),this.clear($("#studioVideoDiv")),$("#stVideoDiv").hide(),$("#tvDivId").show(),$("#tvDivId .vtitle span").text(i)),n.find(".img-loading").fadeIn(0).delay(2e3).fadeOut(200),this.videoData(n,"currVideoUrl",t),this.videoData(n,"currVideoTitle",i),/\.html/.test(t)?this.playByIframe(n,t,i,!0):/type=blws/.test(t)?this.playByBLWS(n,t,i,!0):/\.swf/.test(t)?this.playByEmbed(n,t,i,!0):/rtmp/.test(t)?obsPlayer.init(t,"studioVideoDiv",!0):this.playBySewise(n,t,i,!0)}},getArticleList:function(e,t,i,n,a,o,s,r){try{$.getJSON("/studio/getArticleList",{authorId:common.trim(s),code:e,platform:t,hasContent:i,pageNo:n,pageSize:a,orderByStr:o},function(e){r(e)})}catch(l){console.error("getArticleList->"+l),r(null)}},setVideoList:function(){this.getArticleList("teach_video_base,teach_video_gw,teach_video_expert",this.userInfo.groupId,0,1,100,'{"sequence":"desc","publishStartDate":"desc"}',null,function(e){if(e&&0==e.result){var t=e.data,i=null,n=null;for(var a in t)i=t[a],i.mediaUrl&&(n={title:i.detailList[0].title,id:i._id,type:common.isValid(i.mediaUrl)&&-1!=i.mediaUrl.indexOf(".mp4")?"mp4":"",url:i.mediaUrl},StudioChatMini.video.list.push(n),"mp4"===n.type&&StudioChatMini.video.listMp4Index.push(a))}StudioChatMini.playVideo("live")})},setEvent:function(){$("#vbackbtn_live").click(function(){StudioChatMini.playVideo("live",!0)}),$("#vbackbtn_chg").click(function(){StudioChatMini.playVideo("video")}),$("#vbackbtn_video").click(function(){StudioChatMini.playVideo("mp4")})},setTalkListScroll:function(e){var t=$("#chatMsgContentDiv");t.hasClass("mCustomScrollbar")?(t.mCustomScrollbar("update"),e&&t.mCustomScrollbar("scrollTo","bottom")):(t.mCustomScrollbar({scrollInertia:1,scrollButtons:{enable:!1},theme:"light-2"}),t.mCustomScrollbar("scrollTo","bottom"))},formatPublishTime:function(e,t,i){
var n=Number(e.replace(/_.+/g,""));return common.isBlank(e)?"":t?common.formatterDateTime(n,i):common.getHHMM(n)},setContent:function(e,t,i){var n=e.fromUser;if(t&&(n.publishTime=e.uiId),!e.isVisitor){if(i&&$("#"+n.publishTime).length>0)return $("#"+n.publishTime+" span[contt] em[class=ruleTipStyle]").remove(),void $("#"+n.publishTime+" input").remove();if(e.rule)return void(e.value&&e.value.needApproval?$("#"+e.uiId).attr("id",n.publishTime):$("#"+e.uiId+' span[contt="a"]').append('<em class="ruleTipStyle">'+e.value.tip+"</em>"));if(!t&&StudioChatMini.userInfo.userId==n.userId&&e.serverSuccess)return $("#"+e.uiId+" .dtime").html(StudioChatMini.formatPublishTime(n.publishTime)),void $("#"+e.uiId).attr("id",n.publishTime);var a=StudioChatMini.formatContentHtml(e,t,i),o=$("#dialog_list");o.append(a),this.formatMsgToLink(n.publishTime),i||StudioChatMini.setTalkListScroll(!0)}},formatContentHtml:function(e,t,i){var n,a="dialog ",o="uname ",s="false",r=e.fromUser,l=e.content,u=r.nickname,c=r.toUser,d="";c&&common.isValid(c.userId)&&(d='<span class="txt_dia" uid="'+c.userId+'" utype="'+c.userType+'">@<label>'+c.nickname+"</label></span>",StudioChatMini.userInfo.userId==c.userId&&(s="true")),n=l.msgType==StudioChatMini.msgType.img?l.needMax?'<a href="/studio/getBigImg?publishTime='+r.publishTime+"&userId="+r.userId+'" data-lightbox="dialog-img"><img src="'+l.value+'" alt="图片"/></a>':'<a href="'+(l.value?l.value:"javascript:")+'" data-lightbox="dialog-img"><img src="'+l.value+'" alt="图片" /></a>':l.value,StudioChatMini.userInfo.userId==r.userId?(a+="mine",u="我",s="true"):3==r.userType?u+="&nbsp;（助理）":2==r.userType?a+="analyst":1==r.userType&&(a+="admin");var p=[];return p.push('<div class="'+a+'" id="'+r.publishTime+'" isMe="'+s+'" utype="'+r.userType+'" mType="'+l.msgType+'" t="header">'),p.push('<a href="javascript:" class="headimg" uid="'+r.userId+'">'+StudioChatMini.getUserAImgCls(r.userId,r.clientGroup,r.userType,r.avatar)+"</a>"),p.push('<div class="duser">'),"true"==s?(p.push('<span class="dtime">'+StudioChatMini.formatPublishTime(r.publishTime)+"</span>"),p.push('<a href="javascript:"  class="'+o+'">'+u+"</a>")):(p.push('<a href="javascript:"  class="'+o+'">'+u+"</a>"),p.push('<span class="dtime">'+StudioChatMini.formatPublishTime(r.publishTime)+"</span>")),p.push("</div><p>"),c&&common.isValid(c.question)?(p.push('<span class="dcont">'),p.push('<span uid="'+c.userId+'" utype="'+c.userType+'">'+c.nickname+"</span>提问："),p.push('<span contt="q">'+c.question+"</span>"),p.push('<span class="dialog_reply">回复：<span contt="a">'+n+"</span></span>"),p.push("</span>")):p.push('<span class="dcont" contt="a">'+d+n+"</span>"),p.push("</p></div>"),p.join("")},formatMsgToLink:function(e){$("#"+e+' span[contt]:contains("http:"),#'+e+' span[contt]:contains("https:")').each(function(e,t){var i=$(t).html(),n=i.split(/<img[^>]*>|<a[^>]*>.*?<\/a>/g),a="";for(var o in n)if(a=n[o],!common.isBlank(a)){var s=a.replace(/(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|\\&|-)+)(:\d+)?(\/|\S)+/g,function(e){return'<a href="'+e+'" target="_blank">'+e+"</a>"});t.innerHTML=t.innerHTML.replace(a,s)}})},removeLoadDom:function(e){$("#"+e+" .img-loading,#"+e+" .img-load-gan,#"+e+" .shadow-box,#"+e+" .shadow-conut").remove()},getUserAImgCls:function(e,t,i,n){var a="";if(i&&0!=i&&common.isValid(n))return'<img src="'+n+'">';if("vip"==t)a="user_v";else if("active"==t||"notActive"==t)a="user_r";else if("simulate"==t)a="user_d";else if("register"==t)a="user_m";else{if("visitor"==t||-1==i){e=e||"";var o=parseInt(e.substring(e.length-2),10);return isNaN(o)&&(o=100),o=(o+17)%40,'<img src="'+StudioChatMini.filePath+"/upload/pic/header/chat/visitor/"+o+'.png">'}a="user_c"}return'<img src="/pm/theme3/img/'+a+'.png">'},setSocket:function(){this.socket=common.getSocket(io,this.socketUrl,this.userInfo.groupType),this.socket.on("connect",function(){console.log("connected to server!"),StudioChatMini.userInfo.socketId=StudioChatMini.socket.id;var e=$("#studioListId a[class~=ing]");StudioChatMini.socket.emit("login",{userInfo:StudioChatMini.userInfo,fromPlatform:StudioChatMini.options.platform,lastPublishTime:$("#dialog_list>div:last").attr("id"),fUserTypeStr:e.attr("awr"),allowWhisper:e.attr("aw")}),$(".img-loading[pf=chatMessage]").show()}),this.socket.on("disconnect",function(e){console.log("disconnect")}),this.socket.on("error",function(e){console.error("e:"+e)}),this.socket.on("sendMsg",function(e){if(!e.fromUser.toUser||1!=e.fromUser.toUser.talkStyle){if(!e.serverSuccess&&StudioChatMini.userInfo.userId==e.fromUser.userId&&!e.rule)return;StudioChatMini.setContent(e,!1,!1)}}),this.socket.on("notice",function(e){switch(e.type){case"removeMsg":$("#"+e.data.replace(/,/g,",#")).remove(),StudioChatMini.setTalkListScroll(!1);break;case"pushInfo":var t=e.data;if(3==t.position){StudioChatMini.pushObj.talkPush=t.infos;for(var i=0,n=StudioChatMini.pushObj.talkPush.length;n>i;i++)StudioChatMini.pushObj.talkPush[i].nextTm=StudioChatMini.pushObj.talkPush[i].serverTime+60*StudioChatMini.pushObj.talkPush[i].onlineMin*1e3}}}),this.socket.on("loadMsg",function(e){$(".img-loading[pf=chatMessage]").hide();var t=e.msgData,i=e.isAdd;if(i||$("#content_ul").html(""),t&&$.isArray(t)){t.reverse();for(var n in t)StudioChatMini.formatUserToContent(t[n])}StudioChatMini.setTalkListScroll(!0)})},formatUserToContent:function(e){var t={userId:e.userId,nickname:e.nickname,avatar:e.avatar,userType:e.userType,groupId:e.groupId,clientGroup:e.clientGroup,publishTime:e.publishTime,toUser:e.toUser,avatar:e.avatar,position:e.position};StudioChatMini.setContent({fromUser:t,content:e.content},!1,!0)},showTalkPushMsg:function(e){var t=[];t.push('<div class="dialog push">'),t.push(e.content),t.push("</div>"),$("#dialog_list").append(t.join("")),StudioChatMini.setTalkListScroll(!0)},setPushInfo:function(){var e=null,t=this.pushObj.talkPush;if(t&&t.length>0)for(var i=0,n=t.length;n>i;i++)e=t[i],e&&e.nextTm&&this.serverTime>=e.nextTm&&common.dateTimeWeekCheck(e.pushDate,!1,this.serverTime)&&(e.intervalMin&&e.intervalMin>0?e.nextTm=this.serverTime+60*e.intervalMin*1e3:delete e.nextTm,this.showTalkPushMsg(e))}};$(function(){StudioChatMini.init()});